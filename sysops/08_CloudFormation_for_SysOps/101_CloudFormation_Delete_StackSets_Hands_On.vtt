WEBVTT

1
00:00:00.470 --> 00:00:01.580
<v ->Okay, so we'll go ahead</v>

2
00:00:01.580 --> 00:00:03.490
with deletions of stacks within our stack set.

3
00:00:03.490 --> 00:00:04.780
So, I wanna you two option.

4
00:00:04.780 --> 00:00:05.900
To delete this stack set,

5
00:00:05.900 --> 00:00:07.850
you first need to delete all the stacks

6
00:00:07.850 --> 00:00:09.310
within your stack sets.

7
00:00:09.310 --> 00:00:11.770
So, we have two options to delete the instances.

8
00:00:11.770 --> 00:00:12.603
For example, say,

9
00:00:12.603 --> 00:00:15.750
"I wanted to detach this stack right here

10
00:00:15.750 --> 00:00:16.583
in eu-central1,

11
00:00:16.583 --> 00:00:17.470
because I wanna keep it,

12
00:00:17.470 --> 00:00:20.100
regardless of whether or not I delete my stack sets."

13
00:00:20.100 --> 00:00:23.710
So, to do so, I'm going to Actions

14
00:00:23.710 --> 00:00:26.610
and then I will delete stacks from the stack sets.

15
00:00:26.610 --> 00:00:28.937
I will paste the account number and it will say,

16
00:00:28.937 --> 00:00:30.250
"Hey for this region.

17
00:00:30.250 --> 00:00:32.040
For the Frankfurt region,

18
00:00:32.040 --> 00:00:33.850
you're going to delete the stack from the stack set,

19
00:00:33.850 --> 00:00:37.000
but I want you to actually retain the stack."

20
00:00:37.000 --> 00:00:38.730
So, the idea is that is going to remove this stack

21
00:00:38.730 --> 00:00:39.640
from the stack sets,

22
00:00:39.640 --> 00:00:41.410
but the stack will still exist in my account.

23
00:00:41.410 --> 00:00:42.340
So, let's verify that.

24
00:00:42.340 --> 00:00:45.200
Currently, we have three stacks in my accounts,

25
00:00:45.200 --> 00:00:46.290
but if I do Next

26
00:00:47.520 --> 00:00:49.190
and then Submit,

27
00:00:49.190 --> 00:00:50.900
what's going to happen in this operation

28
00:00:50.900 --> 00:00:53.600
is that it will detach this stack from the stack set.

29
00:00:53.600 --> 00:00:56.950
So, if I refresh this while the stack is still here,

30
00:00:56.950 --> 00:00:58.950
but now, if I go under Stack instances,

31
00:00:58.950 --> 00:01:01.410
we can see that it is not managed.

32
00:01:01.410 --> 00:01:02.243
And we should see it right now.

33
00:01:02.243 --> 00:01:03.650
Yeah. There are only two stacks.

34
00:01:03.650 --> 00:01:06.900
So, it is not managed anymore by my stack sets.

35
00:01:06.900 --> 00:01:07.890
Very, very nice.

36
00:01:07.890 --> 00:01:09.710
Then if I wanted to delete really everything.

37
00:01:09.710 --> 00:01:11.060
I could do Actions

38
00:01:11.060 --> 00:01:12.730
and then delete stack from stack sets.

39
00:01:12.730 --> 00:01:14.750
So, same account number,

40
00:01:14.750 --> 00:01:16.600
and I will add all regions,

41
00:01:16.600 --> 00:01:19.240
and it will say, "You can do it in parallel."

42
00:01:19.240 --> 00:01:20.890
And this time I will choose to delete the stack.

43
00:01:20.890 --> 00:01:24.060
So, I will not enable this button right here.

44
00:01:24.060 --> 00:01:25.210
Click on Next.

45
00:01:25.210 --> 00:01:26.340
Submit.

46
00:01:26.340 --> 00:01:29.490
And now this is actually going to go through the deletion

47
00:01:29.490 --> 00:01:32.410
of the underlying stacks in CloudFormation StackSets.

48
00:01:32.410 --> 00:01:35.310
So, this can take a little bit of time to run, obviously,

49
00:01:35.310 --> 00:01:37.973
because now we are actually deleting the stacks.

50
00:01:39.290 --> 00:01:41.540
Now that all my stack instances are gone

51
00:01:41.540 --> 00:01:42.373
from my stack set,

52
00:01:42.373 --> 00:01:43.920
what I can do is Action.

53
00:01:43.920 --> 00:01:45.520
Delete StackSet.

54
00:01:45.520 --> 00:01:46.353
Press Yes.

55
00:01:46.353 --> 00:01:47.340
And we're good to go.

56
00:01:47.340 --> 00:01:50.060
If you wanted to truly clean up again

57
00:01:50.060 --> 00:01:52.060
you also need to delete all the execution roles

58
00:01:52.060 --> 00:01:52.960
you have created from before.

59
00:01:52.960 --> 00:01:54.470
So, let's delete this stack set

60
00:01:54.470 --> 00:01:57.670
that was just detached from my stack sets.

61
00:01:57.670 --> 00:02:00.620
And then I can delete all the execution roles

62
00:02:00.620 --> 00:02:01.620
that we created from before,

63
00:02:01.620 --> 00:02:04.210
as well as the admin role.

64
00:02:04.210 --> 00:02:05.820
And this is good to go.

65
00:02:05.820 --> 00:02:07.900
Now we have a full cleanup of stack sets,

66
00:02:07.900 --> 00:02:10.050
and I hope you liked this lecture.

67
00:02:10.050 --> 00:02:12.000
And I will see you in the next lecture.

