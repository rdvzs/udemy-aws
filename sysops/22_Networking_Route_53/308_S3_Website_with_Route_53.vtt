WEBVTT

1
00:00:00.300 --> 00:00:01.790
<v Instructor>So a question that can come up is</v>

2
00:00:01.790 --> 00:00:05.610
how to enable an S3 website with Route 53.

3
00:00:05.610 --> 00:00:09.610
So say your website, were be acme.example.com

4
00:00:09.610 --> 00:00:12.490
and you own the domain name exemple.com.

5
00:00:12.490 --> 00:00:14.630
So for this, you want users to access your website

6
00:00:14.630 --> 00:00:18.720
through acme.example.com, with the HTTP protocol.

7
00:00:18.720 --> 00:00:21.150
And so first you need to create an S3 bucket

8
00:00:21.150 --> 00:00:22.250
with the exact same name.

9
00:00:22.250 --> 00:00:24.020
And this is a very, very important

10
00:00:24.020 --> 00:00:26.720
to have the exact same name as the target record.

11
00:00:26.720 --> 00:00:29.920
So acme.example.com has to be created.

12
00:00:29.920 --> 00:00:33.490
Then we enable the S3 bucket to be websites

13
00:00:33.490 --> 00:00:36.670
and also make sure that the objects are public.

14
00:00:36.670 --> 00:00:39.000
Then, we're going to go into Route 53

15
00:00:39.000 --> 00:00:40.880
and we're going to create an alias record

16
00:00:40.880 --> 00:00:45.710
to the S3 website endpoint of type A with the IPv4 address.

17
00:00:45.710 --> 00:00:46.910
So in here, we're going

18
00:00:46.910 --> 00:00:49.830
to specify the record name, acme.example.com.

19
00:00:49.830 --> 00:00:52.507
Type is A, and the value is going to be S3website.,

20
00:00:53.620 --> 00:00:56.800
then the region name, .amazonaws.com.

21
00:00:56.800 --> 00:00:59.450
And then because we are matching the record name

22
00:00:59.450 --> 00:01:02.220
to the S3 bucket name, then automatically

23
00:01:02.220 --> 00:01:04.010
the users are going to be able to access

24
00:01:04.010 --> 00:01:07.010
our S3 bucket through that URL as you'll see.

25
00:01:07.010 --> 00:01:08.580
Just to note, that this only works

26
00:01:08.580 --> 00:01:11.450
for HTTP traffic, not for HTTPS.

27
00:01:11.450 --> 00:01:12.660
For this, you will need to use

28
00:01:12.660 --> 00:01:16.990
a CDN solution such as CloudFront first.

29
00:01:16.990 --> 00:01:19.980
So let's go into the hands-on to practice this.

30
00:01:19.980 --> 00:01:23.010
Okay, so we would like to have an S3 bucket

31
00:01:23.010 --> 00:01:26.260
to be at, blog.stephanetheteacher.com.

32
00:01:26.260 --> 00:01:28.380
And to just display some information.

33
00:01:28.380 --> 00:01:31.250
So what I'm going to do is go into Amazon history

34
00:01:31.250 --> 00:01:34.730
and I'm first going to create an S3 bucket being public.

35
00:01:34.730 --> 00:01:39.730
So I'll call it, blog.stephanetheteacher.com.

36
00:01:39.730 --> 00:01:42.500
And it has to absolutely match the name

37
00:01:42.500 --> 00:01:45.010
you're going to give in the record in Route 53.

38
00:01:45.010 --> 00:01:46.060
Otherwise it's not going to work.

39
00:01:46.060 --> 00:01:47.540
So this is an exam question.

40
00:01:47.540 --> 00:01:48.940
You need to make sure that the bucket name

41
00:01:48.940 --> 00:01:51.510
matches the record in Route 53.

42
00:01:51.510 --> 00:01:53.820
Okay. So now we just play a region.

43
00:01:53.820 --> 00:01:55.930
We're going to allow public access

44
00:01:55.930 --> 00:01:57.620
and acknowledge that this is okay.

45
00:01:57.620 --> 00:02:00.503
And then I'm going to click on Create Bucket.

46
00:02:02.210 --> 00:02:04.490
Now I need to go into my bucket

47
00:02:04.490 --> 00:02:07.390
and I will go ahead and upload some files.

48
00:02:07.390 --> 00:02:11.340
So let me click on add files and then find my S3.

49
00:02:11.340 --> 00:02:15.750
And I'm going to add my index and my coffee files.

50
00:02:15.750 --> 00:02:17.510
Okay. So we're good to go.

51
00:02:17.510 --> 00:02:19.060
Now, in terms of permissions,

52
00:02:19.060 --> 00:02:22.170
I can just grant public access to these objects

53
00:02:22.170 --> 00:02:23.980
and we should be good to go.

54
00:02:23.980 --> 00:02:25.780
And click on Upload.

55
00:02:25.780 --> 00:02:29.000
So my objects are now public in my buckets.

56
00:02:29.000 --> 00:02:31.740
And so if I click on Properties now

57
00:02:31.740 --> 00:02:35.090
and look for the website settings.

58
00:02:35.090 --> 00:02:36.600
Then at the very, very bottom,

59
00:02:36.600 --> 00:02:38.830
I can find a static website hosting.

60
00:02:38.830 --> 00:02:40.610
I will enable it.

61
00:02:40.610 --> 00:02:43.760
And then we're going to host a static website, okay.

62
00:02:43.760 --> 00:02:47.420
And the index document is index.html.

63
00:02:47.420 --> 00:02:50.550
Let's save our changes. And we're good to go.

64
00:02:50.550 --> 00:02:53.630
So now, if I go into my file right here

65
00:02:53.630 --> 00:02:58.540
and look at the the URL itself.

66
00:02:58.540 --> 00:03:01.890
So this URL shows me that this file is public.

67
00:03:01.890 --> 00:03:03.280
So this is great. Okay.

68
00:03:03.280 --> 00:03:04.630
And we are,

69
00:03:04.630 --> 00:03:09.270
if I go into now the Website Settings at the very bottom,

70
00:03:09.270 --> 00:03:11.580
we have this website right here available to us

71
00:03:11.580 --> 00:03:14.490
and we can see that, yes, we are able to access it

72
00:03:14.490 --> 00:03:18.900
at blog.stephanetheteacher.com.s3-website.eu-central-1

73
00:03:18.900 --> 00:03:20.310
and this is a very long URL.

74
00:03:20.310 --> 00:03:21.143
Okay.

75
00:03:21.143 --> 00:03:23.300
So now we want to just shorten this URL

76
00:03:23.300 --> 00:03:26.310
to just be, blog.stephanethteacher.com.

77
00:03:26.310 --> 00:03:28.920
And so to do so this is just not done yet. Okay.

78
00:03:28.920 --> 00:03:31.260
So to do so I need to go into Route 53

79
00:03:31.260 --> 00:03:33.390
and I need to create a new record.

80
00:03:33.390 --> 00:03:35.490
Now the record name is going to be blog.

81
00:03:35.490 --> 00:03:38.150
The record type is going to be an, A record

82
00:03:38.150 --> 00:03:41.100
and then the value is going to be an alias.

83
00:03:41.100 --> 00:03:43.170
Now we're going to route the traffic to,

84
00:03:43.170 --> 00:03:45.110
an S3 website end point.

85
00:03:45.110 --> 00:03:46.100
We need to choose the region.

86
00:03:46.100 --> 00:03:48.853
So, eu-central one.

87
00:03:50.000 --> 00:03:51.940
And then the end point itself has

88
00:03:51.940 --> 00:03:54.460
to be blog.stephanetheteacher.com.

89
00:03:54.460 --> 00:03:59.460
Which is the name of my bucket name. Okay.

90
00:03:59.610 --> 00:04:01.610
It has to be the exact same.

91
00:04:01.610 --> 00:04:04.750
As you can see it says s3website.eu-central1.amazonaws.

92
00:04:04.750 --> 00:04:07.010
And so it understands that it should

93
00:04:07.010 --> 00:04:09.610
find this bucket right here.

94
00:04:09.610 --> 00:04:10.800
This bucket right here.

95
00:04:10.800 --> 00:04:13.430
Because the name of my record

96
00:04:13.430 --> 00:04:17.510
is exactly the same as my bucket name.

97
00:04:17.510 --> 00:04:18.940
So this is the trick part here.

98
00:04:18.940 --> 00:04:22.200
that when we go to go, we click on the Create record.

99
00:04:22.200 --> 00:04:24.060
Now this record has been created.

100
00:04:24.060 --> 00:04:26.870
So we have blog.stephanetheteacher.com.

101
00:04:26.870 --> 00:04:28.930
And let's wait a little bit for things to be replicated.

102
00:04:28.930 --> 00:04:31.290
And then try to go to that URL.

103
00:04:31.290 --> 00:04:34.200
So let me open a new tab, paste the URL,

104
00:04:34.200 --> 00:04:36.850
and now using blog.stephanetheteacher.com,

105
00:04:36.850 --> 00:04:41.480
I am able to access my S3 website hosted on S3.

106
00:04:41.480 --> 00:04:44.080
And so, this is pretty cool. We don't have HTTPS enabled.

107
00:04:44.080 --> 00:04:46.990
We can not enable HTTPS with S3 websites.

108
00:04:46.990 --> 00:04:49.320
For this we would need to use something like CloudFront

109
00:04:49.320 --> 00:04:51.847
to use a custom domain and an S3 website.

110
00:04:51.847 --> 00:04:54.660
But at least we have seen how to do it.

111
00:04:54.660 --> 00:04:59.660
How to link Route 53 alias record into your S3 buckets.

112
00:05:00.480 --> 00:05:01.950
So I hope you liked this lecture

113
00:05:01.950 --> 00:05:03.900
and I will see you in the next lecture.

