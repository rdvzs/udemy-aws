WEBVTT

1
00:00:00.140 --> 00:00:01.880
<v Instructor>Okay, so let's talk about the differences</v>

2
00:00:01.880 --> 00:00:04.660
of backups and snapshots in RDS.

3
00:00:04.660 --> 00:00:06.420
So backups are going to be continuous

4
00:00:06.420 --> 00:00:09.300
and they allow point in time recovery.

5
00:00:09.300 --> 00:00:11.830
So the backups will happen during the maintenance windows.

6
00:00:11.830 --> 00:00:13.470
And when you delete a database instance,

7
00:00:13.470 --> 00:00:15.490
you can retain all the automated backups

8
00:00:15.490 --> 00:00:16.580
that have been done.

9
00:00:16.580 --> 00:00:18.398
So the backups will have a retention period,

10
00:00:18.398 --> 00:00:21.810
and you set it between zero and 35 days.

11
00:00:21.810 --> 00:00:24.700
So that means that if you wanted to backtrack

12
00:00:24.700 --> 00:00:27.660
to any point of time within the last, say 35 days,

13
00:00:27.660 --> 00:00:29.660
you could use backups for that.

14
00:00:29.660 --> 00:00:30.960
And to disable backups,

15
00:00:30.960 --> 00:00:34.170
you would set the retention period of the backups to zero.

16
00:00:34.170 --> 00:00:35.440
Snapshots are different.

17
00:00:35.440 --> 00:00:37.610
Snapshots will take IO operations

18
00:00:37.610 --> 00:00:40.950
and they will stop the database from seconds to minutes

19
00:00:40.950 --> 00:00:42.970
while the snapshot is being taken.

20
00:00:42.970 --> 00:00:45.760
And if you have a Multi AZ enabled and you do a snapshot,

21
00:00:45.760 --> 00:00:47.480
then the snapshot will not be done on the master,

22
00:00:47.480 --> 00:00:49.860
it will be done on the standby database.

23
00:00:49.860 --> 00:00:51.460
The snapshots are going to be incremental

24
00:00:51.460 --> 00:00:52.610
after this first snapshot

25
00:00:52.610 --> 00:00:54.940
and the first snapshot is going to be taken in full.

26
00:00:54.940 --> 00:00:57.750
And the IO Snapshots, you can copy them

27
00:00:57.750 --> 00:01:00.260
and share them across accounts.

28
00:01:00.260 --> 00:01:02.650
Now, manual snapshots do not expire.

29
00:01:02.650 --> 00:01:05.010
So you can take a manual Snapshots, okay?

30
00:01:05.010 --> 00:01:07.130
And you can take a final snapshot

31
00:01:07.130 --> 00:01:09.010
when you delete your database.

32
00:01:09.010 --> 00:01:11.890
No matter what, if you have a backup or a snapshot

33
00:01:11.890 --> 00:01:13.510
and you do a restore from them,

34
00:01:13.510 --> 00:01:15.920
restoring from an automated backup or database snapshot,

35
00:01:15.920 --> 00:01:18.330
will create a new database instance.

36
00:01:18.330 --> 00:01:21.690
You can not do an in-place restore, okay?

37
00:01:21.690 --> 00:01:23.880
Now, let's talk about snapshots sharing,

38
00:01:23.880 --> 00:01:26.000
because you can not share backups.

39
00:01:26.000 --> 00:01:27.420
So a snapshot can be shared.

40
00:01:27.420 --> 00:01:29.730
And this is a very, very similar way

41
00:01:29.730 --> 00:01:31.280
to how you share EBS snapshot.

42
00:01:31.280 --> 00:01:33.320
So if you remember how you can share EBS snapshots,

43
00:01:33.320 --> 00:01:35.340
then you're good to go with RDS snapshots.

44
00:01:35.340 --> 00:01:37.050
We can share them with our accounts.

45
00:01:37.050 --> 00:01:38.610
And if you allow them to be shared,

46
00:01:38.610 --> 00:01:41.610
then the accounts, other accounts can create an RDS database

47
00:01:41.610 --> 00:01:43.280
directly from your snapshots.

48
00:01:43.280 --> 00:01:46.670
So manual snapshots can be shared with other accounts.

49
00:01:46.670 --> 00:01:48.460
It has to be manual, okay?

50
00:01:48.460 --> 00:01:50.980
And automated snapshots cannot be shared.

51
00:01:50.980 --> 00:01:53.240
You have to copy it first.

52
00:01:53.240 --> 00:01:56.910
So when you share an unencrypted snapshots, it works,

53
00:01:56.910 --> 00:01:58.680
or if you have a snapshot that is encrypted

54
00:01:58.680 --> 00:02:01.140
with a customer master key, it has to be yours,

55
00:02:01.140 --> 00:02:03.590
and then if you do it, you can share it as well.

56
00:02:03.590 --> 00:02:06.003
But if you wanted to share an encrypted snapshots,

57
00:02:06.003 --> 00:02:08.950
you first need to also share the CMK

58
00:02:08.950 --> 00:02:10.660
associated with that snapshots.

59
00:02:10.660 --> 00:02:12.630
So this is the same diagram as EBS

60
00:02:12.630 --> 00:02:13.500
that we've seen from before.

61
00:02:13.500 --> 00:02:15.340
So we have a snapshot that's encrypted

62
00:02:15.340 --> 00:02:17.460
and is shared with another accounts.

63
00:02:17.460 --> 00:02:20.810
The other accounts can only read the snapshots

64
00:02:20.810 --> 00:02:24.320
if it has the IN permissions to get access

65
00:02:24.320 --> 00:02:27.060
to the underlying CMK of the snapshots.

66
00:02:27.060 --> 00:02:29.090
And if that is the case, then the database instance

67
00:02:29.090 --> 00:02:31.113
can be launched and you're good to go.

68
00:02:32.510 --> 00:02:35.260
So if we over look at this database right here,

69
00:02:35.260 --> 00:02:38.390
so here's our database and we have maintenance and backups.

70
00:02:38.390 --> 00:02:40.570
And as you can see, backups are going

71
00:02:40.570 --> 00:02:43.150
to be automatically enabled for seven days,

72
00:02:43.150 --> 00:02:44.960
and then the tags are going to be copied

73
00:02:44.960 --> 00:02:46.210
to the snapshots as well.

74
00:02:47.323 --> 00:02:48.870
There's a backup window, which is defined right here,

75
00:02:48.870 --> 00:02:51.939
which is 30 minutes at night.

76
00:02:51.939 --> 00:02:53.650
And you can edit the backup settings if you want

77
00:02:53.650 --> 00:02:55.060
replicate to different region

78
00:02:55.060 --> 00:02:57.480
or to replicate the automated backups.

79
00:02:57.480 --> 00:03:00.550
And then some snapshots also being taken,

80
00:03:00.550 --> 00:03:01.840
they could be automated or manual,

81
00:03:01.840 --> 00:03:03.700
and this one has been automated.

82
00:03:03.700 --> 00:03:06.400
So if you go on the left hand side into automated backups,

83
00:03:06.400 --> 00:03:08.850
as we can see, my database right here

84
00:03:08.850 --> 00:03:11.550
is being currently backed up, okay?

85
00:03:11.550 --> 00:03:14.080
And so the backups will appear right here

86
00:03:14.080 --> 00:03:15.680
and we can get some information.

87
00:03:16.760 --> 00:03:18.750
And you can see in their current region,

88
00:03:18.750 --> 00:03:20.990
they're replicated and they're retained.

89
00:03:20.990 --> 00:03:22.340
And if you go into snapshots,

90
00:03:22.340 --> 00:03:25.750
you will see the manual snapshots or the system snapshots.

91
00:03:25.750 --> 00:03:27.450
So you can take one of your database.

92
00:03:27.450 --> 00:03:29.810
For example, you can take this one

93
00:03:29.810 --> 00:03:31.630
and you could create a snapshot from it.

94
00:03:31.630 --> 00:03:33.720
Action and then take snapshots.

95
00:03:33.720 --> 00:03:36.140
And this snapshots will live forever

96
00:03:36.140 --> 00:03:37.760
because you're taking it manually,

97
00:03:37.760 --> 00:03:40.360
whereas an automated backup or automated snapshots

98
00:03:40.360 --> 00:03:43.020
will go away at some point.

99
00:03:43.020 --> 00:03:44.580
So this is really the idea behind it.

100
00:03:44.580 --> 00:03:46.050
And then once you have your snapshots,

101
00:03:46.050 --> 00:03:47.790
what you can do is you can share them.

102
00:03:47.790 --> 00:03:50.800
So you can take one and then you can copy this one.

103
00:03:50.800 --> 00:03:52.670
And then once it's copied it's yours,

104
00:03:52.670 --> 00:03:55.320
and then you can share the snapshots to another accounts.

105
00:03:55.320 --> 00:03:57.280
And then you can see the snapshots

106
00:03:57.280 --> 00:04:00.470
that have been shared with you right here as well, okay?

107
00:04:00.470 --> 00:04:01.490
So that's it for this lecture.

108
00:04:01.490 --> 00:04:02.323
I hope you liked it.

109
00:04:02.323 --> 00:04:04.240
And I will see you in the next lecture.

